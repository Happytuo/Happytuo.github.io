(()=>{var e={123:e=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,t,o){if("string"!=typeof e)return console.warn("Key must be a string"),!1;if(!e)return console.warn("Key is invalid"),!1;if("string"!=typeof t)return console.warn("value must be a string"),!1;if(!t)return console.warn("Value is invalid"),!1;if("object"!==n(o)||Array.isArray(o)||null===o)return console.warn("Config must be an object"),!1;var i="".concat(e,"=").concat(t);return Object.keys(o).forEach((function(e){"secure"!==o[e]?i+=";".concat(e,"=").concat(o[e]):i+=";secure"})),i}e.exports={generateUID:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},generateCookieString:t,setDataToStorage:function(e,o,i){if("string"!=typeof e)return console.warn("Key must be a string"),!1;if(!e)return console.warn("Key is invalid"),!1;if("string"!=typeof o)return console.warn("value must be a string"),!1;if(!o)return console.warn("Value is invalid"),!1;if("object"!==n(i)||Array.isArray(i)||null===i)return console.warn("Config must be an object"),!1;var a=t(e,o,i);document.cookie=a;try{window.localStorage.setItem("".concat(e),"".concat(o))}catch(e){}},getDataFromStorage:function(e){if("string"!=typeof e)return console.warn("Key must be a string"),!1;var n=document.cookie.split(";");if(!(n=n.filter((function(n){return-1!=n.indexOf("".concat(e,"="))})))[0])try{return window.localStorage.getItem(e)}catch(e){return null}return n[0].split("=")[1]},getTopDomain:function(){var e=window.location.host.split(".");return e[0]="",e.join(".")}}}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}(()=>{function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function o(n,t,o){return(t=function(n){var t=function(n,t){if("object"!==e(n)||null===n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var i=o.call(n,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"===e(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}var i,a,r=t(123),c=r.generateUID,d=r.setDataToStorage,s=r.getDataFromStorage,l=r.getTopDomain,u=[{id:1,name:"pageview",onlySendOnce:!0,isSended:!1},{id:3,name:"click",onlySendOnce:!1,isSended:!1},{id:4,name:"engagement",onlySendOnce:!0,isSended:!1},{id:5,name:"landing_page",onlySendOnce:!1,isSended:!1},{id:6,name:"item_view",onlySendOnce:!1,isSended:!1},{id:7,name:"add_to_cart",onlySendOnce:!1,isSended:!1},{id:8,name:"initiate_checkout",onlySendOnce:!1,isSended:!1},{id:9,name:"add_payment_info",onlySendOnce:!1,isSended:!1},{id:10,name:"purchase",onlySendOnce:!1,isSended:!1},{id:11,name:"add_contact",onlySendOnce:!1,isSended:!1},{id:12,name:"submit_application",onlySendOnce:!1,isSended:!1},{id:13,name:"complete_registration",onlySendOnce:!1,isSended:!1},{id:14,name:"lead",onlySendOnce:!1,isSended:!1},{id:15,name:"scroll_25",onlySendOnce:!0,isSended:!1},{id:16,name:"scroll_50",onlySendOnce:!0,isSended:!1},{id:17,name:"scroll_75",onlySendOnce:!0,isSended:!1},{id:18,name:"scroll_95",onlySendOnce:!0,isSended:!1}],p=["pageview"],f=["pageview"],m=!1,g=!1,v=!1,w=null,y="",h=[],b=[];function S(e,n,t){if("string"==typeof e)if("string"==typeof n){if("init"===e)return function(e,n,t){y=e;var o=63072e3,i=t&&t.useSubDomain?location.host:l(),a=t?t.crossDomainWhiteList:[];if((n.get("clickid")||n.get("_upx_clickid"))&&d("vpadn-clid",n.get("clickid")||n.get("_upx_clickid"),{domain:i,path:"/",secure:!0,"max-age":o}),s("vpadn-ctid")){var r=s("vpadn-ctid");d("vpadn-ctid",r,{domain:l(),path:"/",secure:!0,"max-age":o})}else w=n.get("_upx_ctid")||"v1_".concat(c(),".").concat((new Date).getTime()),d("vpadn-ctid",w,{domain:l(),path:"/",secure:!0,"max-age":o});window.top===window||s("vpadn-ctid")&&s("vpadn-clid")||(window.parent.postMessage({eventName:"requestUpxData"},"*"),window.addEventListener("message",(function(e){if("responseUpxData"===e.data.eventName){var n=e.data.data,t=n._upx_clickid,o=n._upx_ctid,a=63072e3;t&&!s("vpadn-clid")&&d("vpadn-clid",t,{domain:i,path:"/",secure:!0,"max-age":a,sameSite:"None"}),o&&d("vpadn-ctid",o,{domain:l(),path:"/",secure:!0,"max-age":a,sameSite:"None"})}})));a&&a.length&&function(e){document.addEventListener("mousedown",(function(n){x(n,e)}),!1),document.addEventListener("keyup",(function(n){x(n,e)}),!1)}(a)}(n,new URLSearchParams(window.location.search),t),m=!0,t.GAID&&(function(e){var n=document.createElement("script");n.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),n.async=!0,document.head.appendChild(n)}(S=t.GAID),window.dataLayer=window.dataLayer||[],window.gtag=function(){console.log(arguments),dataLayer.push(arguments)},gtag("js",new Date),gtag("config",S),g=!0),void(t.PIXELID&&(o=t.PIXELID,console.log("fbPixelServiceInit"),i=window,a=document,r="script",i.fbq||(p=i.fbq=function(){p.callMethod?p.callMethod.apply(p,arguments):p.queue.push(arguments)},i._fbq||(i._fbq=p),p.push=p,p.loaded=!0,p.version="2.0",p.queue=[],(f=a.createElement(r)).async=!0,f.src="https://connect.facebook.net/en_US/fbevents.js",(b=a.getElementsByTagName(r)[0]).parentNode.insertBefore(f,b)),fbq("init",o),fbq("track","PageView"),v=!0));if("track"===e)return m?-1===u.map((function(e){return e.name})).indexOf(n)?void console.warn("Event name was invalid"):y?void _(n,t,y):void console.warn("LinceseKey cookie was expired"):void console.warn("Vpon pixel was not initialized");if("customTrack"===e)return m?"string"!=typeof n?void console.warn("Option was must be a string"):h.length?-1===h.map((function(e){return e.eventName})).indexOf(n)?void console.warn("Event name was invalid"):void _(n,t,y):void console.warn("Custom event was empty"):void console.warn("Vpon pixel was not initialized");console.warn("Action was invalid")}else console.warn("Option was must be a string");else console.warn("Action was must be a string");var o,i,a,r,p,f,b,S}function _(e,t,i){var a=u.filter((function(n){return n.name===e}))[0];if(!(a.onlySendOnce&&a.isSended||b.length&&b.some((function(e){return e===a.id})))){b.push(a.id);var r=setTimeout((function(){var e;e=a.id,b=b.filter((function(n){return n!==e})),clearTimeout(r)}),300),c=new URLSearchParams(window.location.search),d=c.get("clickid")||c.get("_upx_clickid")||s("vpadn-clid"),l=s("vpadn-ctid")||w;l&&l.split("_").length>1&&(l=l.split("_")[1].split(".")[0]);var m={};if(t){var y={value:"val",currency:"cur",item_id:"ii",item_type:"it",item_name:"in"};Object.keys(t).forEach((function(e){y[e]?m[y[e]]=t[e]:m[e]=t[e]}))}var h=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(n){o(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({k:i,eid:"".concat(i,"_").concat((new Date).getTime()),uid:l,e:a.id,ewl:encodeURIComponent(window.location.href)},m);d&&(h.clid=d),g&&-1===p.indexOf(a.name)&&function(e,n){gtag("event",e,n)}(a.name,t),v&&-1===f.indexOf(a.name)&&function(e,n){fbq("track",e,n)}(a.name,t),function(e,n){var t="https://u-dsp.vpadn.com/upx-event?";if(Object.keys(n).forEach((function(e,o){t+=0!==o?"&".concat(e,"=").concat(n[e]):"".concat(e,"=").concat(n[e])})),window.navigator&&navigator.sendBeacon)navigator.sendBeacon(t);else{var o=document.createElement("img");o.width=1,o.height=1,o.src=t,document.body.appendChild(o)}e.isSended=!0}(a,h)}}function x(e,n){for(var t=e.target||e.srcElement,o={},i=100;i>0&&t;i--){if(t.nodeName.match(/^a(?:rea)?$/i)&&t.href){o=t;break}t=t.parentNode}if(function(e,n){if("http:"!==e.protocol&&"https:"!==e.protocol)return!1;var t=e.host;return n.some((function(e){var n=function(e){var n=e;return e.includes("://")&&(n=e.split("://")[1]),n.split(".")[0]}(e);if("*"!==n&&""!==n)return e===t;var o=t.split("."),i=e.split(".");return o.shift(),i.shift(),o.join(".")===i.join(".")}))}(o,n)){var a=new URLSearchParams(o.search),r={_upx_clickid:s("vpadn-clid"),_upx_ctid:s("vpadn-ctid")},c=[];Object.keys(r).forEach((function(e){r[e]&&!a.get(e)&&c.push("".concat(e,"=").concat(r[e]))})),c.length&&(o.search?o.href="".concat(o.href,"&").concat(c.join("&")):o.href="".concat(o.href,"?").concat(c.join("&")))}}window.addEventListener("message",(function(e){"requestUpxData"===e.data.eventName&&e.source.postMessage({eventName:"responseUpxData",data:{_upx_ctid:s("vpadn-ctid"),_upx_clickid:s("vpadn-clid")}},"*")})),i=0,a=setInterval((function(){i+=1}),1e3),window.addEventListener("click",(function(e){"A"===e.target.nodeName&&e.target.attributes.href&&(VponPixel("track","click"),VponPixel("track","engagement",{item_type:"click"}))})),window.addEventListener("scroll",(function(){var e=document,n=e.documentElement,t=e.body,o=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),r=100*(window.scrollY+window.innerHeight)/o;r>=25&&r<50&&VponPixel("track","scroll_25"),r>=50&&r<75&&VponPixel("track","scroll_50"),r>=75&&r<95&&VponPixel("track","scroll_75"),r>=95&&(VponPixel("track","scroll_95"),VponPixel("track","engagement",{item_type:encodeURIComponent("95%")}),clearInterval(a)),r>=25&&r<95&&i>20&&(VponPixel("track","engagement",{item_type:"20s"}),clearInterval(a))})),VponPixel("track","pageview"),VponPixel.actionQueue&&VponPixel.actionQueue.length&&VponPixel.actionQueue.forEach((function(e){"track"===e.action&&window.top!==window?setTimeout((function(){S(e.action,e.option,e.data)}),200):S(e.action,e.option,e.data)})),window.VponPixel=S})()})();
//# sourceMappingURL=VponPixel.js.map